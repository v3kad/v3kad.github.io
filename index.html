<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>GMod Loading Screen</title>
    <!-- Подключаем шрифт Roboto (похож на пример) -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- СТИЛИ --- */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #1a1a1a; /* Цвет фона, пока грузятся картинки */
            font-family: 'Roboto', sans-serif;
            color: white;
            /* Отключаем выделение текста */
            user-select: none; 
        }

        /* --- ФОН (Слайдшоу) --- */
        #bg-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .bg-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out; /* Плавность смены фона */
        }

        .bg-slide.active {
            opacity: 1;
        }

        /* Затемнение фона, чтобы текст читался лучше */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4); /* 40% темноты */
            z-index: 0;
        }

        /* --- ЦЕНТРАЛЬНЫЙ БЛОК --- */
        .content-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Центрируем по вертикали */
            align-items: center;     /* Центрируем по горизонтали */
            text-align: center;
        }

        /* 1. Homi-Work */
        .title-main {
            font-size: 6rem; /* Очень крупно */
            font-weight: 900; /* Очень жирно */
            margin: 0;
            line-height: 1;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.8); /* Тень для читаемости */
        }

        /* 2. REWORKED */
        .title-sub {
            font-size: 2rem;
            font-weight: 900;
            color: #ff3333; /* Ярко-красный */
            margin-top: -5px; /* Чуть прижимаем к верхнему тексту */
            margin-bottom: 20px;
            text-transform: uppercase;
            text-shadow: 1px 1px 5px rgba(0,0,0,1);
        }

        /* 3. Название карты */
        .map-name {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 40px; /* Отступ до логов */
            text-shadow: 2px 2px 8px rgba(0,0,0,0.9);
        }

        /* 4. Логи загрузки (Контейнер) */
        .logs-container {
            width: 80%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 150px; /* Фиксированная высота для логов */
            overflow: hidden;
        }

        .log-item {
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
            margin-bottom: 5px;
            transition: all 0.5s ease;
            text-shadow: 1px 1px 3px rgba(0,0,0,1);
        }

        /* --- ЭФФЕКТЫ ДЛЯ СТРОК ЗАГРУЗКИ --- */
        
        /* Самая верхняя строка (Текущая) */
        .log-item:nth-child(1) {
            font-size: 1.5rem; /* Крупная */
            color: #ffffff;
            opacity: 1;
            transform: scale(1.05); /* Чуть увеличена */
        }

        /* Вторая строка (Прошлая) */
        .log-item:nth-child(2) {
            font-size: 1.2rem;
            color: #dddddd;
            opacity: 0.7;
        }

        /* Третья строка */
        .log-item:nth-child(3) {
            font-size: 1rem;
            color: #bbbbbb;
            opacity: 0.4;
        }

        /* Остальные скрываем или делаем совсем прозрачными */
        .log-item:nth-child(n+4) {
            opacity: 0;
            height: 0;
        }

    </style>
</head>
<body>

    <!-- Фон -->
    <div id="bg-container">
        <div class="overlay"></div>
        <!-- Картинки добавляются скриптом -->
    </div>

    <!-- Текст -->
    <div class="content-wrapper">
        <div class="title-main">Homi-Work</div>
        <div class="title-sub">REWORKED</div>
        
        <!-- Сюда попадет название карты -->
        <div class="map-name" id="map-display">Загрузка...</div>

        <div class="logs-container" id="logs">
            <!-- Сюда попадают файлы -->
        </div>
    </div>

    <script>
        // ==========================================
        // НАСТРОЙКИ (РЕДАКТИРОВАТЬ ТУТ)
        // ==========================================
        
        const backgroundImages = [
            // Сюда вставь ссылки на свои картинки.
            // Если они лежат на гитхабе рядом с файлом, просто пиши 'bg1.jpg', 'bg2.jpg'
            'https://via.placeholder.com/1920x1080/222/fff?text=GMOD+BACKGROUND+1',
            'https://via.placeholder.com/1920x1080/444/fff?text=GMOD+BACKGROUND+2',
            'https://via.placeholder.com/1920x1080/666/fff?text=GMOD+BACKGROUND+3'
        ];

        const slideTime = 3000; // 3000 мс = 3 секунды

        // ==========================================
        // ЛОГИКА (НЕ ТРОГАТЬ, ЕСЛИ НЕ ЗНАЕШЬ)
        // ==========================================

        // 1. Слайдшоу
        const bgContainer = document.getElementById('bg-container');
        let currentSlideIndex = 0;

        // Создаем div-ы для картинок
        backgroundImages.forEach((url, index) => {
            const div = document.createElement('div');
            div.className = 'bg-slide';
            div.style.backgroundImage = `url('${url}')`;
            if(index === 0) div.classList.add('active');
            bgContainer.insertBefore(div, bgContainer.firstChild);
        });

        const slides = document.querySelectorAll('.bg-slide');

        function nextSlide() {
            slides[currentSlideIndex].classList.remove('active');
            currentSlideIndex = (currentSlideIndex + 1) % slides.length;
            slides[currentSlideIndex].classList.add('active');
        }
        setInterval(nextSlide, slideTime);


        // 2. Функции Garry's Mod
        // Эти функции игра вызывает сама.

        function GameDetails(servername, serverurl, mapname, maxplayers, steamid, gamemode) {
            // Устанавливаем название карты
            document.getElementById('map-display').innerText = mapname;
        }

        function DownloadingFile(fileName) {
            addLog("Downloading " + fileName);
        }

        function SetStatusChanged(status) {
            addLog(status);
        }

        // Вспомогательная функция добавления лога
        function addLog(text) {
            const container = document.getElementById('logs');
            const div = document.createElement('div');
            div.className = 'log-item';
            div.innerText = text;
            
            // Добавляем в НАЧАЛО (сверху)
            container.prepend(div);

            // Удаляем лишние (больше 4), чтобы не грузить браузер
            if (container.children.length > 5) {
                container.removeChild(container.lastChild);
            }
        }

        // ==========================================
        // ТЕСТОВЫЙ РЕЖИМ (ДЛЯ БРАУЗЕРА)
        // Чтобы ты мог проверить, как выглядит, не заходя в игру
        // ==========================================
        if (!navigator.userAgent.includes("Valve Source Client")) {
            console.log("Режим браузера: Запуск демо-режима");
            
            // Тестовое название карты
            document.getElementById('map-display').innerText = "gm_construct";

            // Тестовая имитация загрузки файлов
            let demoFiles = [
                "materials/models/weapons/v_ak47.vtf",
                "sound/weapons/shotgun/fire.wav",
                "models/player/combine_soldier.mdl",
                "lua/autorun/client/cl_init.lua",
                "maps/graphs/gm_construct.ain"
            ];
            let demoIndex = 0;

            setInterval(() => {
                let file = demoFiles[demoIndex % demoFiles.length];
                DownloadingFile(file); // Имитируем вызов из игры
                demoIndex++;
            }, 800); // Новая строка каждые 0.8 сек
        }
    </script>
</body>
</html>
